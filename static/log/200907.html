<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="content-type" content="text/html" charset="utf-8">
<link rel="stylesheet" href="diary.css" type="text/css">
<title>2009-07</title>
</head>
<body>
<h1 class="diary_month">2009-07</h1>
<hr>
<a href="./" class="diary">戻る</a>
<hr>
<a name="05"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-05T23:29:55 (Sun)</h2>
<h2 class="diary_title">おーわたおわたー</h2>
<div class="diary_body">
陵桜祭 7 お疲れ様でした．本も買えたし何人かと話も出来ましたし，楽しいイベントでした．知り合いがほぼ皆無状態だったのが心残りかなぁ～ (^^;　もうらき☆すたはやっぱり下火ということなんだろうか…ｗ<br>
<br>
それはさておき．<br>
<br>
会場で公開していた体験プレイ用のゲームを配信します．内容はひよりんが某ゲームのような要領で原稿を仕上げていく…というものです．本来なら「あと○枚仕上げれば終了」というものですが，これは体験プレイ用ということで何枚仕上げられるかを競う形に改造しました．<br>
<br>
<a href="http://kaosf.kirara.st/circle/mia_demo_game.tar.gz">http://kaosf.kirara.st/circle/mia_demo_game.tar.gz</a><br>
<br>
作者は昨晩 33 枚，本日 ohrin が 65 枚という記録を達成しました．皆さんはどれくらいスコア取れますかな？<br>
</div>
<h3 class="diary_comment_header">comments</h3>
<div class="diary_comment">
<h3 class="diary_comment_author">サモ (2009-07-07T17:41:58)</h3>
<div class="diary_comment_body">
３２枚越えられないおー(´・ω・｀)<br>
<br>
ちゅーか６５とかチートだろｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗ<br>
</div>
<h3 class="diary_comment_author">か (2009-07-07T22:09:18)</h3>
<div class="diary_comment_body">
まぁその ohrin がまた昨日 70 超えを成し遂げたっスけどね (^ω^)<br>
<br>
現時点で「3 桁は可能！」という結論らしい．<br>
<br>
しかし 3 桁になると多分プログラムがバグって落ちるｗ<br>
</div>
</div>
</div>
<a name="06"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-06T22:59:18 (Mon)</h2>
<h2 class="diary_title">早速修正パッチ行くよー ^o^</h2>
<div class="diary_body">
なんとまさかのファイル不足 ／(^o^)＼<br>
<br>
画像と BGM が何故か合計 8 点も抜けていました．<br>
<br>
CD に焼いた後に起動しか確認しなかった自分の不手際です orz<br>
<br>
<a href="http://kaosf.kirara.st/circle/mia_ver11.tar.gz">Ver1.1 修正パッチ</a><br>
</div>
<h3 class="diary_comment_header">comments</h3>
<div class="diary_comment">
<h3 class="diary_comment_author">さし (2009-07-13T20:12:18)</h3>
<div class="diary_comment_body">
&lt;a target=&quot;_blank&quot; href=&quot;http://www.nicovideo.jp/watch/sm7624423&quot;&gt;【ニコニコ動画】音割れスマン&lt;/a&gt;<br>
</div>
<h3 class="diary_comment_author">か (2009-07-15T03:45:40)</h3>
<div class="diary_comment_body">
わざわざプレイして下さり，しかも動画作成まで…<br>
<br>
ありがとうございます orz<br>
</div>
</div>
</div>
<a name="07"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-07T23:07:08 (Tue)</h2>
<h2 class="diary_title">らっきーBlog とらき☆すたネットアイドル・マイスター応援バナー</h2>
<div class="diary_body">
<a href="http://lucky-blog.com/" target="_blank"><img src="http://lucky-blog.com/user/banner_tower/konata.jpg" width="160" height="600" alt="らっきーBlog" /></a> <a href="http://lucky-blog.com/" target="_blank"><img src="http://lucky-blog.com/user/banner_square/konata.jpg" width="170" height="170" alt="らっきーBlog" /></a> <a href="http://lucky-blog.com/" target="_blank"><img src="http://lucky-blog.com/user/banner_mini/konata.jpg" width="200" height="40" alt="らっきーBlog" /></a><br>
<a href="http://lucky-blog.com/" target="_blank"><img src="http://lucky-blog.com/user/banner_flag/konata.jpg" width="600 height="110" alt="らっきーBlog" /></a><br>
<br>
嬉しくなってつい全部貼っちゃいましたｗ<br>
<br>
もちろん，らっきーBlog も RSS リーダに登録ｗ<br>
<br>
「らき☆すたネットアイドル・マイスター」が今から楽しみでなりません．<br>
</div>
</div>
<a name="08"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-08T23:39:26 (Wed)</h2>
<h2 class="diary_title">胸の痛みで病院へ</h2>
<div class="diary_body">
どうもここしばらく体を内側に曲げると胸の中央少し左寄りが痛むという謎の症状がありまして，治りそうな気配がしないので病院に行って来ました．<br>
<br>
内科と整形外科で見てもらった結果，レントゲンや採血などの結果からは異常は特に見受けられないとのこと．<br>
<br>
一応ということで，明日も同じ病院の循環器科で診てもらうことになりました．<br>
<br>
何事も無ければいいのですが…<br>
</div>
</div>
<a name="09"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-09T22:49:26 (Thu)</h2>
<h2 class="diary_title">検査結果</h2>
<div class="diary_body">
循環器内科でも観てもらいましたが，やはりここでも異常は無いとのことでした．現状の湿布を貼って様子見で十分でしょう，と．<br>
<br>
いやはや．何事も無くて助かりました．<br>
<br>
一応昨日も今日も万が一緊急入院だなんて言われたら大変なので NintendoDS (Lite 本体と充電器と DS テレビとソフト大量) と EeePC + EMOBILE 端末と筆記用具と大量の落書き用紙を持って行ったりしたのですが，必要なかったようで良かったですｗ　着替えは緊急入院ともなれば病院側で準備されるだろう，という考えでしたｗ<br>
<br>
しかし今回のことで油断せずに，今後とも何か体調に異常を感じたら早め早めに病院に行こうと思います．やっぱ時代は予防医療っスよ (^ω^)<br>
</div>
<h3 class="diary_comment_header">comments</h3>
<div class="diary_comment">
<h3 class="diary_comment_author">紀行 (2009-07-10T05:24:14)</h3>
<div class="diary_comment_body">
異常なかったようで何よりです<br>
</div>
<h3 class="diary_comment_author">か (2009-07-10T23:59:06)</h3>
<div class="diary_comment_body">
どもども．とりあえずは嬉しい限り (^ω^)<br>
</div>
</div>
</div>
<a name="10"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-10T23:59:34 (Fri)</h2>
<h2 class="diary_title">ターミネーター 4 見てきた</h2>
<div class="diary_body">
あちこちで面白いとの評判が上がっていたこの作品ですが，とうとう本日見に行くことが出来ました．<br>
<br>
ちなみに私はターミネーターの大ファンです．シリーズ中一番好きな作品は 1 だと言い切る程度の信者です．<br>
<br>
で，その 4 ですが，そんな 1 や 2 のシーンを元にしたネタがあちこちに散りばめられていて，もう色んな意味で感涙でしたｗ<br>
<br>
特にジョンの顔の傷とかね…　もうね…　おーっとこれ以上は言いませんよ．気になる方は是非劇場へｗ<br>
</div>
</div>
<a name="11"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-11T00:08:01 (Sat)</h2>
<h2 class="diary_title">陵桜祭 7 での技術力 (主に Squirrel) の成果</h2>
<div class="diary_body">
思い残すことを列挙すると，<br>
<br>
・クラスのバインドが出来てない<br>
・Squirrel 側から出た例外を C++ 側でキャッチ出来てない<br>
・SqPlus のような自動バインド機能を使えていない<br>
・Eclipse が単なる Squirrel コードエディタだったので IDE として使いたかった<br>
　(※Squirrel プロジェクトを作るみたいなのがあったのできっと出来るハズ)<br>
<br>
しかしチャレンジで得たことも多かった．列挙すると，<br>
<br>
・Squirrel 2.2.2 をほとんど使いこなせるようになった<br>
　(※スタックの動きは完璧に近い理解をしているであろう)<br>
・lua や Squirrel の「テーブル」の概念を覚えた<br>
　(※こいつぁ便利度高過ぎる)<br>
・コルーチンを実用出来た<br>
　(※やっぱり便利　最終的にシーン管理なんかはほとんどこいつで自動化された)<br>
・Squirrel ではグローバル変数を多大に使うことになるが案外どうにかなると知った<br>
・この程度の規模なら Squirrel でメインループから書いてしまっても問題なかった<br>
　(※と言ってもメモリ 512MB などの環境では他のソフトとの同時起動なんかは厳しかったようだけど)<br>
<br>
さて，SqPlus をどうすっぺか．個人的に今の「関数と定数のバインドだけ出来る」状態で十分っぽいのよね．<br>
<br>
後現状で分かっている問題…というか仕様上どうしようもない問題っぽいのが 1 つあって，それがコルーチンでの this がルートテーブル一択であること．例えば以下のようなコードを考える．<br>
<br>
<blockquote>::y <- 0;<br>
<br>
class Cls {<br>
　x = null;<br>
　constructor() {<br>
　　x = 0;<br>
　}<br>
　function method() {<br>
　　//local cr = this.newthread(this.f); //こう書いても変わらない<br>
　　local cr = ::newthread(this.f);<br>
　　cr.call();<br>
　　while (cr.getstatus() == "suspended") {<br>
　　　print("while loop\n");<br>
　　　cr.wakeup();<br>
　　}<br>
　}<br>
　//コルーチン本体<br>
　function f() {<br>
　　if ("y" in this) print("y exist\n");<br>
　　if ("x" in this) print("x exist (success!)\n");<br>
　　for (local i = 0; i < 5; i++) {<br>
　　　print("coro loop " + i + "\n");<br>
　　　::suspend();<br>
　　}<br>
　　return null;<br>
　}<br>
}<br>
<br>
local c = Cls();<br>
c.method();</blockquote><br>
とすると実行結果は<br>
<br>
<blockquote>y exist<br>
coro loop 0<br>
while loop<br>
coro loop 1<br>
while loop<br>
coro loop 2<br>
while loop<br>
coro loop 3<br>
while loop<br>
coro loop 4<br>
while loop</blockquote><br>
となる．this には x は存在せずに y が存在している．これは this がルートテーブルであることの証拠である．(わざわざループを書いたのはコルーチンをそれっぽく見せるためｗ)<br>
<br>
<s>せいぜいこれを解決するには<br>
<br>
<blockquote>::y <- 0;<br>
<br>
class Cls {<br>
　x = null;<br>
　constructor() {<br>
　　x = 0;<br>
　}<br>
　function method() {<br>
　　//local cr = this.newthread(this.f); //こう書いても変わらない<br>
　　local cr = ::newthread(this.f);<br>
　　cr.call(this); //自分自身のインスタンスを渡す<br>
　　while (cr.getstatus() == "suspended") {<br>
　　　print("while loop\n");<br>
　　　cr.wakeup();<br>
　　}<br>
　}<br>
　//コルーチン本体<br>
　function f(inst) {<br>
　　this = inst; //強制的に this を書き換える<br>
　　if ("y" in this) print("y exist\n");<br>
　　if ("x" in this) print("x exist (success!)\n");<br>
　　for (local i = 0; i < 10; i++) {<br>
　　　print("coro loop " + i + "\n");<br>
　　　::suspend();<br>
　　}<br>
　　return null;<br>
　}<br>
}<br>
<br>
local c = Cls();<br>
c.method();</blockquote><br>
のようにする程度しか思い付かない．<br>
<br>
this を強制的に書き換えるってのが非常に気持ち悪い感じ…　Squirrel ならこれくらい普通！と思い込むことも可能ですが，はてさて (^^;</s><br>
<br>
[追記 2009-11-30T06:59]<br>
<br>
解決しました．詳細は<a href="http://kaosf.kirara.st/sb/sb.cgi?eid=259" target="_blank">こちらのエントリ</a>から．<br>
</div>
<h3 class="diary_comment_header">comments</h3>
<div class="diary_comment">
<h3 class="diary_comment_author">すん (2009-07-11T22:00:28)</h3>
<div class="diary_comment_body">
うーむｗｗｗ<br>
<br>
なんのこっちゃ／(＾o＾)＼<br>
<br>
音楽の作り方なら授業料変わりに伝授するよ！＼(^o^)／<br>
</div>
<h3 class="diary_comment_author">か (2009-07-12T10:41:23)</h3>
<div class="diary_comment_body">
コルーチンはええでぇ～ (´∀`)　便利やでぇ～<br>
</div>
</div>
</div>
<a name="12"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-12T21:40:51 (Sun)</h2>
<h2 class="diary_title">プログラマの麻疹</h2>
<div class="diary_body">
<a href="http://d.hatena.ne.jp/Yoshiori/20090706/1246849833" target="_blank">プログラマの麻疹</a> (<a href="http://d.hatena.ne.jp/Yoshiori/" target="_blank">YoshioriのBlog</a>)<br>
<br>
OO 厨とインタフェイス厨とワンライナ厨はかかりましたが既に治ってますｗ<br>
<br>
最近は function 厨と lambda 厨，クロージャ厨になっている気がしますね (^^;<br>
</div>
</div>
<a name="14"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-14T11:03:44 (Tue)</h2>
<h2 class="diary_title">Haskell 触ってみました</h2>
<div class="diary_body">
先輩に ghc (Glasgow Haskell Compiler) というコンパイラを教えていただき，先日とうとう関数型言語デビューしました (正確に言うと Emacs Lisp がデビューですが)．<br>
<br>
ちなみに ghc をインストールすると ghci というインタプリタも入ってます．お得ですｗ<br>
<br>
で使ってみた感想ですが…<br>
<br>
カリー化面白いです．式がどんどん評価されていって結果が出る…って言うよりはむしろ結果に「なる」って考え方？これもまず手で追いかけてみたりすると楽しいですわｗ<br>
<br>
所謂 car と cdr と cons は x:xs みたいな書き方してパターンマッチして…　ってのが難しい．<br>
<br>
あと f :: [a] -> [a] とか f :: (a, b) -> [a] -> [b] とかも慣れるまでは厳しそうです orz<br>
</div>
</div>
<a name="15"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-15T23:48:11 (Wed)</h2>
<h2 class="diary_title">エヴァ破を見てきた</h2>
<div class="diary_body">
学校が終わってから，レイトショーで見てきました．<br>
<br>
やっぱり劇場版ってのは原作とは別作品として楽しまないとダメだなぁ～ｗ<br>
</div>
</div>
<a name="18"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-18T23:48:29 (Sat)</h2>
<h2 class="diary_title">ひっさしぶりにそれはもう遊んだ遊んだ</h2>
<div class="diary_body">
昨日学校が終わると同時にとらのあなにダッシュして東方幻想麻雀を入手し，夜はずっと対人戦やってました．<br>
<br>
で今日は朝から渋谷であったヴァイスシュヴァルツの大会に P さんと一緒に参加してきました．<br>
<br>
大会が終わった後は天下一品のラーメン (こってりスープ) を初めて食べたり，買い物したり，マッサージ店に行ってみたり，二郎に行ってみたり (※ただし麺終了により閉店だった orz)，またヴァイスの対戦をしたり買い物をしたりしてました．<br>
<br>
で今帰宅と．<br>
<br>
P さんからは明日もヴァイスの大会に出ようよと誘われましたがさすがに疲れるのでパスｗ (^^;<br>
<br>
明日はまた SqPlus と Squirrel の実験や調査をいくつかやってみるつもりです．<br>
<br>
そしてそれでもまだ休日が 1 日残っているというのだから素晴らしい…！GW 終了後からまったく祝日の無い期間を約 2 ヶ月程度も乗り切った身には三連休はたまりませんなｗ<br>
</div>
</div>
<a name="21"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-21T01:19:06 (Tue)</h2>
<h2 class="diary_title">三連休＼(^o^)／</h2>
<div class="diary_body">
結局残りの 2 日 (19, 20) はほとんどニコ動で FFT の風水術縛りプレイ動画ばかり見てました．<br>
<br>
Squirrel + SqPlus とかヘッダファイルの依存関係を追いかけたくらいだね．いや，理論もいいけど実用しろよと orz<br>
<br>
動画閲覧は最初からぶっ通して見たため，合計で 10 時間以上は軽く掛かってるみたいです．休日を有効活用したんだか無駄遣いしたんだかよく分かりませんね ^q^<br>
<br>
さて，今週は来週から始まる期末試験のための勉強週間です．3 科目 (正確にはそこを更に細分化して 7 科目) あるので，正直単位落とすとまた来年とかやってられるか，って感じ．ですので何としても生き残りたいです．…でも 3 つのうちの 1 つが実に危なげなのよねぇ…　うあ～怖い＞＜；；<br>
<br>
あとレポート地獄も地味にあったりします．22 日締め切りの大した量の無いものが 1 つと，7 月末締め切りのものが 1 つ，そして 8 月頭が締め切りのもの 2 つ．<br>
<br>
その中で更に研究も進めなくちゃならないんですよ…　まぁうちはまだ過去の研究の追実験の段階ですので，内容的に辛いものではない (※答えが用意されている的な意味で) のが救いですが．<br>
<br>
なんか 2006 年にサイトで日記をつけ始めて以来，本当に冗談抜きで毎年この時期には「試験が～」って言ってますよねｗ　mixi で日記書いてた 2005 年 (大学 1 年当時) はそうでもなかったけど…　夏の風物詩ですなｗ　まぁそれも今年と来年で最後…　俺，院を卒業したら就職するんだ．博士課程はないわぁ…　外国の学会とか行きたくないです＞＜<br>
</div>
</div>
<a name="24"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-24T16:29:09 (Fri)</h2>
<h2 class="diary_title">Windows プログラミングでの文字の扱いあれこれ</h2>
<div class="diary_body">
Windows プログラミングに関して，<br>
<br>
<strong>Unicode，マルチバイト文字，ワイド文字，TEXT マクロ，_T マクロ，WCHAR 型，wchar_t 型，TCHAR 型…</strong><br>
<br>
などなどの概念に悩まされているそこのアナタ (私のことです orz)．<br>
<br>
何かとリンクエラーやらコンパイルエラーを引き起こしてくれるのはよくこいつら絡みのことだったりしますよね．(wchar_t [] を char * に変換出来ません云々…とか)<br>
<br>
てことでそういう今ひとつ整理出来てない概念を調べてみました的な調査メモ．というよりブックマーク．<br>
<br>
<a href="http://wisdom.sakura.ne.jp/system/winapi/win32/win4.html" target="_blank">Windowsと文字コード</a><br>
<a href="http://mkubara.com/index.php/%E3%83%9E%E3%83%AB%E3%83%81%E3%83%90%E3%82%A4%E3%83%88%E6%96%87%E5%AD%97%E5%88%97%E3%81%A8%E3%83%AF%E3%82%A4%E3%83%89%E6%96%87%E5%AD%97%E5%88%97" target="_blank">マルチバイト文字列とワイド文字列</a><br>
<a href="http://marupeke296.com/CPP_StaticLibraryAndUnicode.html" target="_blank">その６ スタティックライブラリとUnicodeとマルチ文字の罠</a><br>
</div>
</div>
<a name="24"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-24T19:53:38 (Fri)</h2>
<h2 class="diary_title">Squirrel で日本語を使う</h2>
<div class="diary_body">
<a href="http://tobysoft.net/wiki/index.php?Squirrel%2F%C6%FC%CB%DC%B8%EC%B2%BD%C2%D0%B1%FE%A4%CB%A4%C4%A4%A4%A4%C6" target="_blank">Squirrel/日本語化対応について </a><br>
<a href="http://monsho.blog63.fc2.com/blog-entry-49.html" target="_blank">Squirrel おまけ (もんしょの巣穴blog)</a><br>
<br>
で，結局どうすればいいんだろう…<br>
<br>
プロジェクトのプロパティで「UNICODE 文字セットを使用する」って設定にして Squirrel のスクリプトを utf16 で編集しても<s>結局「ソ」などの文字がエラーを出す状況は変わらないのですが…　うーむ orz</s><br>
<br>
ミスってた．utf16 で編集したものだと ?? と出力される (エラーにはならない)．どっちにしてもダメですが．<br>
<br>
やっぱりもんしょの巣穴 blog にあるようにソース改変しないとダメ？でも ASCII が使えなくなるってどういう意味なんだろう…　DX ライブラリが使えなくなる，ってことになるなら今のまま「ソ」「申」「表」「予」「能」「十」を使わないように工夫し続けるのか…<br>
<br>
(追記) と思ったら sq.exe で ???? などと表示される場合の対処法，みたいに書いてますね．<br>
<br>
<pre>setlocale(LC_ALL, "");</pre><br>
と書けばいいらしい？　何なんだコレ…？<br>
<br>
とりあえず sq.c に #include <locale.h> と追加して，そして main 関数の変数の宣言の次の部分 (処理が始まる一番最初の部分) にこの関数呼び出し処理を追加してみたら，見事に「ソ」の表示に成功！<br>
<br>
で，これはコンソールに出力するときに Shift JIS に変換するためのもののようで．今まで sq.exe で試してたのでもしかしたらゲーム (DX ライブラリの DrawString 関数など) とは別なのかも…<br>
<br>
(追記) 結局実際にゲームに組み込んでみたらダメでした orz<br>
<br>
せっかく DX ライブラリの API に対応するようにワイド文字 ←→ マルチバイト文字の変換関数 (<a href="http://msdn.microsoft.com/ja-jp/library/s7wzt4be.aspx" target="_blank">mbstowcs_s や wcstombs_s</a>) で変換して使うように全部書き換えたのに… (^^;<br>
</div>
</div>
<a name="25"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-25T11:03:05 (Sat)</h2>
<h2 class="diary_title">Squirrel 2.2.2 stable で日本語を使う方法 (※ただし Shift JIS に限る)</h2>
<div class="diary_body">
Squirrel 2.2.2 はデフォルトでマルチバイト対応でビルドされるようになってる (プロジェクトのプロパティの 構成プロパティ > 全般 > 文字セット が「マルチバイト文字セットを使用する」にデフォルトでなっている) ので何もしなくても Shift JIS は読み込めるのですが，「ソ」「申」などちょっとした理由で使えない文字があります．<br>
<br>
詳しい理由は <a href="http://www.shtml.jp/mojibake/sjis_cgi.html" target="_blank">http://www.shtml.jp/mojibake/sjis_cgi.html</a> や <a href="http://www.offsetlabs.com/freenote/note_1_169.html" target="_blank">http://www.offsetlabs.com/freenote/note_1_169.html</a> でも見て下さい．"ソ 申 表" でググってヒットしたページです．<br>
<br>
で，先日紹介した <a href="http://monsho.blog63.fc2.com/blog-entry-49.html" target="_blank">Squirrel おまけ (もんしょの巣穴blog)</a> を参考にします．<br>
<br>
ここでこのブログ主は「330 行目に追加」と書いてますが，多分バージョン 2.1 限定の話です．実際 2.2.2 では 332 行目に追加しなくてはなりませんでした．<br>
<br>
正確に具体的に言うと，<strong>sqlexer.cpp の SQInteger SQLexer::ReadString(SQInteger ndelim,bool verbatim) という関数内の，先に出てくる switch 文の default の処理の先頭部分</strong>です．<br>
<br>
<blockquote>　　　　　　break;<br>
　　　　　}<br>
　　　　}<br>
　　　　break;<br>
　　　default:<br>
<strong>//独自追加部分<br>
#ifndef SQUNICODE<br>
　　　　if(((CUR_CHAR >= 0x81) && (CUR_CHAR <= 0x9F))<br>
　　　　　|| ((CUR_CHAR >= 0xE0) && (CUR_CHAR <= 0xFF))){<br>
　　　　　　APPEND_CHAR(CUR_CHAR);<br>
　　　　　　NEXT();<br>
　　　　}<br>
#endif //独自追加部分ここまで</strong><br>
　　　　APPEND_CHAR(CUR_CHAR);<br>
　　　　NEXT();<br>
　　　}<br>
　　}<br>
　　NEXT();<br>
　　if(verbatim && CUR_CHAR == '"') { //double quotation<br>
</blockquote><br>
こんな感じになります．<br>
<br>
最初は律儀に 330 行目 (default の前の部分) に追加して，「結果変わらないなぁ…」と悩みました (^^;<br>
<br>
気付けたのは SourceForge にあったある人のリポジトリ (<a href="http://sourceforge.jp/users/shive428/history?limit=50&skip=150&_sl=1" target="_blank">shive さんの活動履歴</a>) のおかげです．"Squirrel SJIS" でググって偶然ヒットしました．2008-09-04 のリビジョン 29 (sjis 対応というメモが付いてる) の sqlexer.cpp を参照しました．<br>
<br>
ちなみに sqlexer.cpp に限らず，Squirrel のソースファイルは全て読み取り専用ファイルになっているので，そこのチェックを外さないと改造は出来ません．ご注意を．(せっせと書き換えて保存しようとしたら「読み取り専用なので保存無理っス，サーセン (^^」と言われたときは焦ったｗ)<br>
<br>
あと shive さんのソースだと追加部分が<br>
<br>
<blockquote>if(::isleadbyte(CUR_CHAR)){<br>
　APPEND_CHAR(CUR_CHAR);<br>
　NEXT();<br>
}<br>
</blockquote><br>
となっていますが，どうもこう書き換えても成功しませんでした (ビルドは出来るが例えば "ソ" はやっぱり読み込めない)．なので素直にもんしょの巣穴 blog の方を使います．<br>
<br>
とりあえずこれで日本語文字を気にせず使えるようになります．Shift JIS に限りますが，別に世界に展開するつもりもありませんし，Windows で開発するならデフォルトになっている Shift JIS を使う方がテキストファイルの保存時にいちいち気を遣わなくてもよくなるのでいいと思います．<br>
</div>
</div>
<a name="31"></a>
<div class="diary">
<h2 class="diary_date_header">2009-07-31T15:57:09 (Fri)</h2>
<h2 class="diary_title">テスト期間終了～</h2>
<div class="diary_body">
ようやく学校のテストが終了しました．後は 2 つばかりレポートを残すだけなり．<br>
<br>
夏休みの予定は，まずお盆までは学校で研究だけは続きます．けど学校に行く時間は授業じゃないので完全自由．なかなか起きられない身としてはかなりありがたいです．<br>
<br>
で，お盆はコミケ．コミケが終わったら 1 週間ほどゆっくりしてから，北海道の友人宅に遊びに行きます．<br>
<br>
で最終週に徳島に帰省．9 月の頭にまた関東に戻って，そして 9 月 6 日はこみトレで大阪へ．<br>
<br>
こみトレでゲームをまた作ることになっているので，8 月中の空き時間は基本的にゲーム作成に回します．<br>
<br>
そんな感じで割とダラダラする暇も少なく夏休みは過ぎて行きそうです．<br>
</div>
</div>
<hr>
<a href="./">戻る</a>
<hr>
</body>
</html>
